"use strict";(self.webpackChunktainacan=self.webpackChunktainacan||[]).push([[2280],{5203:(e,t,a)=>{a.d(t,{A:()=>s});var i=a(6934);function n(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return m(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?m(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var _n=0,i=function(){};return{s:i,n:function(){return _n>=e.length?{done:!0}:{done:!1,value:e[_n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){l=!0,n=e},f:function(){try{s||null==a.return||a.return()}finally{if(l)throw n}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=Array(t);a<t;a++)i[a]=e[a];return i}const s={name:"TainacanFormItem",components:{TainacanText:(0,i.$V)((function(){return Promise.all([a.e(554),a.e(1685)]).then(a.bind(a,11685))})),TainacanTextarea:(0,i.$V)((function(){return a.e(7207).then(a.bind(a,37207))})),TainacanSelectbox:(0,i.$V)((function(){return a.e(3343).then(a.bind(a,93343))})),TainacanNumeric:(0,i.$V)((function(){return a.e(451).then(a.bind(a,60451))})),TainacanDate:(0,i.$V)((function(){return Promise.all([a.e(554),a.e(507)]).then(a.bind(a,40507))})),TainacanRelationship:(0,i.$V)((function(){return Promise.all([a.e(7200),a.e(8219)]).then(a.bind(a,98219))})),TainacanTaxonomy:(0,i.$V)((function(){return Promise.all([a.e(4561),a.e(4777)]).then(a.bind(a,14777))})),TainacanCompound:(0,i.$V)((function(){return Promise.all([a.e(9734),a.e(6989)]).then(a.bind(a,56989))})),TainacanUser:(0,i.$V)((function(){return a.e(4909).then(a.bind(a,24909))})),TainacanGeocoordinate:(0,i.$V)((function(){return Promise.all([a.e(5218),a.e(8061),a.e(6038),a.e(8039)]).then(a.bind(a,29863))})),TainacanUrl:(0,i.$V)((function(){return a.e(9763).then(a.bind(a,39763))}))},props:{itemMetadatum:Object,isCollapsed:!0,hideCollapses:!1,hideMetadataTypes:Boolean,hideHelpButtons:Boolean,helpInfoBellowLabel:Boolean,isLastMetadatum:!1,metadataNameFilterString:"",isMobileScreen:!1,isFocused:!1,isMetadataNavigation:!1,enumerateMetadatum:[String,Boolean]},emits:["input","change-collapse","mobile-special-focus"],data:function(){return{values:[],errorMessage:"",isHighlightedMetadatum:!1}},computed:{metadatumComponent:function(){return this.itemMetadatum&&this.itemMetadatum.metadatum&&this.itemMetadatum.metadatum.metadata_type_object.component?this.itemMetadatum.metadatum.metadata_type_object.component:""},isMultiple:function(){return!(!this.itemMetadatum||!this.itemMetadatum.metadatum||"yes"!=this.itemMetadatum.metadatum.multiple)&&"yes"==this.itemMetadatum.metadatum.multiple},maxMultipleValues:function(){return this.itemMetadatum&&this.itemMetadatum.metadatum&&this.itemMetadatum.metadatum.cardinality&&!isNaN(this.itemMetadatum.metadatum.cardinality)&&this.itemMetadatum.metadatum.cardinality>1?this.itemMetadatum.metadatum.cardinality:void 0},isTextInputComponent:function(){return!(["tainacan-relationship","tainacan-taxonomy","tainacan-compound","tainacan-user","tainacan-geocoordinate"].indexOf(this.metadatumComponent)>=0)},metadatumFormClasses:function(){return(this.hideCollapses?" has-collapses-hidden":"")+(this.isHighlightedMetadatum?" highlighted-metadatum":"")+(this.metadatumComponent?" tainacan-metadatum-component--"+this.metadatumComponent:"")+(this.itemMetadatum&&this.itemMetadatum.metadatum&&this.itemMetadatum.metadatum.placeholder?" has-placeholder":"")+(this.itemMetadatum&&this.itemMetadatum.metadatum&&this.itemMetadatum.metadatum.description?" has-description":"")+(this.itemMetadatum&&this.itemMetadatum.metadatum&&this.itemMetadatum.metadatum.id?" tainacan-metadatum-id--"+this.itemMetadatum.metadatum.id:"")+(this.isFocused?" is-focused":"")+(this.errorMessage?" is-danger":"")}},created:function(){var e=this;this.setInitialValues(),this.$emitter.on("updateErrorMessageOf#"+(this.itemMetadatum.parent_meta_id?this.itemMetadatum.metadatum.id+"-"+this.itemMetadatum.parent_meta_id:this.itemMetadatum.metadatum.id),(function(t){var a="";if(t&&t.errors&&e.itemMetadatum&&e.itemMetadatum.metadatum&&(e.itemMetadatum.parent_meta_id?e.itemMetadatum.parent_meta_id==t.parent_meta_id&&e.itemMetadatum.metadatum.id==t.metadatum_id:e.itemMetadatum.metadatum.id==t.metadatum_id)){var i,m=n(t.errors);try{for(m.s();!(i=m.n()).done;)for(var s=i.value,l=0,d=Object.keys(s);l<d.length;l++){a+=s[d[l]]+"\n"}}catch(e){m.e(e)}finally{m.f()}}e.errorMessage=a}))},beforeUnmount:function(){this.itemMetadatum&&this.itemMetadatum.metadatum&&this.$emitter.off("updateErrorMessageOf#"+(this.itemMetadatum.parent_meta_id?this.itemMetadatum.metadatum.id+"-"+this.itemMetadatum.parent_meta_id:this.itemMetadatum.metadatum.id))},mounted:function(){var e=this;this.$route&&this.$route.query&&this.$route.query.editingmetadata&&(this.isHighlightedMetadatum=this.$route.query.editingmetadata==(this.itemMetadatum.parent_meta_id?this.itemMetadatum.metadatum.id+"-"+this.itemMetadatum.parent_meta_id:this.itemMetadatum.metadatum.id),this.isHighlightedMetadatum&&(0,i.dY)((function(){var t=e.$refs["highlighted-metadatum"];t&&t.$el&&t.$el.scrollIntoView&&setTimeout((function(){return t.$el.scrollIntoView()}),500)})))},methods:{setInitialValues:function(){this.itemMetadatum&&(this.itemMetadatum.value instanceof Array?this.values=this.itemMetadatum.value.slice(0):null==this.itemMetadatum.value||null==this.itemMetadatum.value?this.values=[]:this.values.push(this.itemMetadatum.value))},changeValue:_.debounce((function(){this.performValueChange()}),800),performValueChange:function(){var e=this;if("tainacan-compound"!=this.metadatumComponent){if(null!==this.itemMetadatum.value&&!1!==this.itemMetadatum.value)switch(this.itemMetadatum.value.constructor.name){case"Array":var t=[],a=[];if(a=this.values.length&&this.values[0]&&"Object"==this.values[0].constructor.name?this.values.map((function(e){return e.value})):this.values,Array.isArray(a)){var i,m=n(a);try{var s=function(){var a=i.value,n=e.itemMetadatum.value.findIndex((function(e){return a==e.id}));n>=0&&t.push(e.itemMetadatum.value[n])};for(m.s();!(i=m.n()).done;)s()}catch(e){m.e(e)}finally{m.f()}if(t.length==a.length&&this.itemMetadatum.value.length<=t.length)return}else if(this.itemMetadatum.value==a)return;break;case"Object":if(Array.isArray(this.values)&&this.values.length&&this.values[0]==this.itemMetadatum.value.id||this.values==this.itemMetadatum.value.id)return;break;default:if(!this.errorMessage&&this.values.length&&this.values[0]==this.itemMetadatum.value)return}this.$emit("input",{itemId:this.itemMetadatum.item.id,metadatumId:this.itemMetadatum.metadatum.id,values:this.values?this.values:"",parentMetaId:this.itemMetadatum.parent_meta_id,parentId:null!=this.itemMetadatum.metadatum.parent?this.itemMetadatum.metadatum.parent:0})}},addValue:function(){this.values.push(""),this.changeValue()},removeValue:function(e){this.values.splice(e,1),this.changeValue()},onMobileSpecialFocus:function(){this.isMobileScreen&&this.$emit("mobile-special-focus")}}}},36757:(e,t,a)=>{a.d(t,{X:()=>p});var i=a(6934),n=function(e){return(0,i.Qi)("data-v-88f63110"),e=e(),(0,i.jt)(),e},m={key:0,style:{opacity:"0.65"},class:"metadatum-section-enumeration"},s={key:2,class:"metadata-type"},l={key:0},d={key:0,class:"metadatum-description-help-info"},o=["onClick"],u=n((function(){return(0,i.Lk)("span",{class:"icon is-small"},[(0,i.Lk)("i",{class:"tainacan-icon has-text-secondary tainacan-icon-remove"})],-1)})),r=n((function(){return(0,i.Lk)("span",{class:"icon is-small"},[(0,i.Lk)("i",{class:"tainacan-icon has-text-secondary tainacan-icon-add"})],-1)})),c={key:1},h={key:0,class:"metadatum-description-help-info"};function p(e,t,a,n,p,f){var v=(0,i.g2)("help-button"),M=(0,i.g2)("b-field");return(0,i.uX)(),(0,i.Wv)(M,{ref:p.isHighlightedMetadatum?"highlighted-metadatum":"null",class:(0,i.C4)(f.metadatumFormClasses),addons:!1,message:p.errorMessage,type:p.errorMessage?"is-danger":""},{default:(0,i.k6)((function(){return[(0,i.Lk)("span",{class:"collapse-handle",onClick:t[1]||(t[1]=function(t){return a.hideCollapses||a.isMetadataNavigation?"":e.$emit("change-collapse",!!p.errorMessage||!a.isCollapsed)})},[a.hideCollapses?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("span",{key:0,class:"icon",onClick:t[0]||(t[0]=function(t){return!a.hideCollapses&&a.isMetadataNavigation?e.$emit("change-collapse",!!p.errorMessage||!a.isCollapsed):""})},[(0,i.Lk)("i",{class:(0,i.C4)([{"tainacan-icon-arrowdown":a.isCollapsed||p.errorMessage,"tainacan-icon-arrowright":!(a.isCollapsed||p.errorMessage)},"has-text-secondary tainacan-icon tainacan-icon-1-25em"])},null,2)])),(0,i.Lk)("label",{class:(0,i.C4)(["label",{"has-text-danger":p.errorMessage}])},[a.enumerateMetadatum?((0,i.uX)(),(0,i.CE)("span",m,(0,i.v_)(a.enumerateMetadatum)+". ",1)):(0,i.Q3)("",!0),(0,i.eW)(" "+(0,i.v_)(a.itemMetadatum.metadatum.name),1)],2),"yes"==a.itemMetadatum.metadatum.required?((0,i.uX)(),(0,i.CE)("span",{key:1,class:(0,i.C4)(["required-metadatum-asterisk",p.errorMessage?"is-danger":""])}," * ",2)):(0,i.Q3)("",!0),a.hideMetadataTypes?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("span",s," ("+(0,i.v_)(a.itemMetadatum.metadatum.metadata_type_object.name)+") ",1)),!a.hideHelpButtons&&!a.helpInfoBellowLabel&&a.itemMetadatum.metadatum&&"yes"!==a.itemMetadatum.metadatum.description_bellow_name&&a.itemMetadatum.metadatum.description?((0,i.uX)(),(0,i.Wv)(v,{key:3,title:a.itemMetadatum.metadatum.name,message:a.itemMetadatum.metadatum.description},null,8,["title","message"])):(0,i.Q3)("",!0)]),(0,i.bF)(i.eB,{name:"filter-item"},{default:(0,i.k6)((function(){return[f.isTextInputComponent?(0,i.bo)(((0,i.uX)(),(0,i.CE)("div",l,[a.itemMetadatum.metadatum&&a.itemMetadatum.metadatum.description&&(!a.hideHelpButtons&&a.helpInfoBellowLabel||"yes"===a.itemMetadatum.metadatum.description_bellow_name)?((0,i.uX)(),(0,i.CE)("p",d,(0,i.v_)(a.itemMetadatum.metadatum.description),1)):(0,i.Q3)("",!0),((0,i.uX)(),(0,i.Wv)((0,i.$y)(f.metadatumComponent),{value:p.values[0],"onUpdate:value":[t[2]||(t[2]=function(e){return p.values[0]=e}),f.changeValue],"item-metadatum":a.itemMetadatum,disabled:!1,"metadata-name-filter-string":a.metadataNameFilterString,"hide-collapses":a.hideCollapses,"hide-metadata-types":a.hideMetadataTypes,"hide-help-buttons":a.hideHelpButtons,"help-info-bellow-label":a.helpInfoBellowLabel,"is-mobile-screen":a.isMobileScreen,"is-focused":a.isFocused,"is-metadata-navigation":a.isMetadataNavigation,onBlur:f.performValueChange,onMobileSpecialFocus:f.onMobileSpecialFocus},null,40,["value","item-metadatum","metadata-name-filter-string","hide-collapses","hide-metadata-types","hide-help-buttons","help-info-bellow-label","is-mobile-screen","is-focused","is-metadata-navigation","onUpdate:value","onBlur","onMobileSpecialFocus"])),f.isMultiple&&p.values.length>1?((0,i.uX)(),(0,i.Wv)(i.F,{key:1,tag:"div",name:"filter-item",class:"multiple-inputs"},{default:(0,i.k6)((function(){return[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(p.values,(function(t,n){return(0,i.uX)(),(0,i.CE)(i.FK,{key:n},[n>0?((0,i.uX)(),(0,i.Wv)((0,i.$y)(f.metadatumComponent),{key:0,value:p.values[n],"onUpdate:value":[function(e){return p.values[n]=e},f.changeValue],"item-metadatum":a.itemMetadatum,disabled:!1,"metadata-name-filter-string":a.metadataNameFilterString,"hide-collapses":a.hideCollapses,"hide-metadata-types":a.hideMetadataTypes,"hide-help-buttons":a.hideHelpButtons,"help-info-bellow-label":a.helpInfoBellowLabel,"is-mobile-screen":a.isMobileScreen,"is-focused":a.isFocused,"is-metadata-navigation":a.isMetadataNavigation,onBlur:f.performValueChange,onMobileSpecialFocus:f.onMobileSpecialFocus},null,40,["value","onUpdate:value","item-metadatum","metadata-name-filter-string","hide-collapses","hide-metadata-types","hide-help-buttons","help-info-bellow-label","is-mobile-screen","is-focused","is-metadata-navigation","onBlur","onMobileSpecialFocus"])):(0,i.Q3)("",!0),n>0?((0,i.uX)(),(0,i.CE)("a",{key:n,class:"add-link",onClick:function(e){return f.removeValue(n)}},[u,(0,i.eW)(" Â "+(0,i.v_)(e.$i18n.get("label_remove_value")),1)],8,o)):(0,i.Q3)("",!0)],64)})),128))]})),_:1})):(0,i.Q3)("",!0),f.isMultiple&&(void 0===f.maxMultipleValues||0===f.maxMultipleValues||1!==f.maxMultipleValues&&f.maxMultipleValues>p.values.length)?((0,i.uX)(),(0,i.CE)("a",{key:2,class:"is-inline-block add-link",onClick:t[3]||(t[3]=function(){return f.addValue&&f.addValue.apply(f,arguments)})},[r,(0,i.eW)(" Â "+(0,i.v_)(e.$i18n.get("label_add_value")),1)])):(0,i.Q3)("",!0)],512)),[[i.aG,a.hideCollapses||a.isCollapsed||!!p.errorMessage]]):(0,i.bo)(((0,i.uX)(),(0,i.CE)("div",c,[a.itemMetadatum.metadatum&&a.itemMetadatum.metadatum.description&&(!a.hideHelpButtons&&a.helpInfoBellowLabel||"yes"===a.itemMetadatum.metadatum.description_bellow_name)?((0,i.uX)(),(0,i.CE)("p",h,(0,i.v_)(a.itemMetadatum.metadatum.description),1)):(0,i.Q3)("",!0),((0,i.uX)(),(0,i.Wv)((0,i.$y)(f.metadatumComponent),{value:p.values,"onUpdate:value":[t[4]||(t[4]=function(e){return p.values=e}),f.changeValue],"item-metadatum":a.itemMetadatum,disabled:!1,"is-last-metadatum":a.isLastMetadatum,"hide-collapses":a.hideCollapses,"hide-metadata-types":a.hideMetadataTypes,"hide-help-buttons":a.hideHelpButtons,"help-info-bellow-label":a.helpInfoBellowLabel,"is-mobile-screen":a.isMobileScreen,"metadata-name-filter-string":a.metadataNameFilterString,"is-focused":a.isFocused,"is-metadata-navigation":a.isMetadataNavigation,"enumerate-metadatum":a.enumerateMetadatum,onBlur:f.performValueChange,onMobileSpecialFocus:f.onMobileSpecialFocus},null,40,["value","item-metadatum","is-last-metadatum","hide-collapses","hide-metadata-types","hide-help-buttons","help-info-bellow-label","is-mobile-screen","metadata-name-filter-string","is-focused","is-metadata-navigation","enumerate-metadatum","onUpdate:value","onBlur","onMobileSpecialFocus"]))],512)),[[i.aG,a.hideCollapses||a.isCollapsed]])]})),_:1})]})),_:1},8,["class","message","type"])}},58684:(e,t,a)=>{a.d(t,{A:()=>l});var i=a(31601),n=a.n(i),m=a(76314),s=a.n(m)()(n());s.push([e.id,".multiple-inputs[data-v-88f63110]{display:flex;margin:0.75em 0;flex-direction:column;justify-content:space-between}[data-v-88f63110] .is-special-hidden-for-mobile,[data-v-88f63110] .is-special-hidden-for-mobile:focus,[data-v-88f63110] .is-special-hidden-for-mobile:focus-visible{opacity:0;width:0;height:0 !important;min-height:0;min-width:0;padding:0 !important;line-height:0px !important;border:none !important;border-color:transparent !important;border-width:0px !important;font-size:0px !important;display:block !important}.field[data-v-88f63110]{border-bottom:1px solid var(--tainacan-input-border-color);padding:10px var(--tainacan-container-padding)}.field.highlighted-metadatum[data-v-88f63110]{background-color:var(--tainacan-white);transition:background-color 0.8s;animation-name:metadatum-highlight;animation-duration:3s;animation-iteration-count:2}.field.is-metadata-navigation-active[data-v-88f63110]{transition:filter 0.2s ease, opacity 0.2s ease}.field:not(.is-focused).is-metadata-navigation-active[data-v-88f63110]{opacity:0.3;filter:grayscale(1)}.field.is-focused.is-metadata-navigation-active[data-v-88f63110]{opacity:1.0;filter:none}.field.has-collapses-hidden[data-v-88f63110]{border-bottom:none;padding:10px !important}.field.has-collapses-hidden .child-metadata-inputs[data-v-88f63110]{margin-left:0.25em}@media screen and (min-width: 770px){.field.has-collapses-hidden .collapse-handle[data-v-88f63110]{margin-left:-15px}}.field .label[data-v-88f63110]{font-size:0.875em;font-weight:500;margin-left:15px;margin-bottom:0;margin-top:0.15em}.field .metadatum-description-help-info[data-v-88f63110]{font-size:0.75em;color:var(--tainacan-info-color);margin-bottom:0.5em}.field .metadata-type[data-v-88f63110]{font-size:0.8125em;font-weight:400;color:var(--tainacan-info-color);opacity:0.75;position:relative}.field .collapse-handle[data-v-88f63110]{cursor:pointer;margin-left:-42px;line-height:1.5em}.field .collapse-handle .tainacan-help-tooltip-trigger[data-v-88f63110]{margin-right:auto}.field .collapse-handle+div[data-v-88f63110]{margin-top:0.5em}.field .add-link[data-v-88f63110]{font-size:0.75em}@media screen and (max-width: 769px){.field .collapse-handle[data-v-88f63110]{font-size:1em;margin-left:0;margin-right:22px;width:100%;display:flex;position:relative;justify-content:space-between;align-items:center}.field .collapse-handle .label[data-v-88f63110]{margin-left:2px;margin-right:0.5em}.field .collapse-handle .icon[data-v-88f63110]{margin-left:auto;order:3;width:2em;justify-content:flex-end}}\n",""]);const l=s},68257:(e,t,a)=>{var i=a(85072),n=a.n(i),m=a(97825),s=a.n(m),l=a(77659),d=a.n(l),o=a(55056),u=a.n(o),r=a(10540),c=a.n(r),h=a(63494),p=a.n(h),f=a(58684),v={};v.styleTagTransform=p(),v.setAttributes=u(),v.insert=d().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=c();n()(f.A,v),f.A&&f.A.locals&&f.A.locals},10128:(e,t,a)=>{a.d(t,{A:()=>i.A});var i=a(5203)},47394:(e,t,a)=>{a.d(t,{X:()=>i.X});var i=a(36757)},24664:(e,t,a)=>{a(68257)}}]);