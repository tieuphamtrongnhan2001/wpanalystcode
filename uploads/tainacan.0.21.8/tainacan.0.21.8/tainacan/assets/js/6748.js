"use strict";(self.webpackChunktainacan=self.webpackChunktainacan||[]).push([[6748],{2626:(t,e,i)=>{i.d(e,{A:()=>a});const a={mixins:[i(8926).s],emits:["input"],data:function(){return{value:null,filterTypeOptions:[],comparator:"="}},watch:{query:{handler:function(){this.updateSelectedValues()},deep:!0}},created:function(){this.comparatorsObject={"=":{symbol:"&#61;",label:this.$i18n.get("is_equal_to"),enabled:this.filterTypeOptions.comparators.indexOf("=")<0?"no":"yes"},"!=":{symbol:"&#8800;",label:this.$i18n.get("is_not_equal_to"),enabled:this.filterTypeOptions.comparators.indexOf("!=")<0?"no":"yes"},">":{symbol:"&#62;",label:this.$i18n.get("greater_than"),enabled:this.filterTypeOptions.comparators.indexOf(">")<0?"no":"yes"},">=":{symbol:"&#8805;",label:this.$i18n.get("greater_than_or_equal_to"),enabled:this.filterTypeOptions.comparators.indexOf(">=")<0?"no":"yes"},"<":{symbol:"&#60;",label:this.$i18n.get("less_than"),enabled:this.filterTypeOptions.comparators.indexOf("<")<0?"no":"yes"},"<=":{symbol:"&#8804;",label:this.$i18n.get("less_than_or_equal_to"),enabled:this.filterTypeOptions.comparators.indexOf("<=")<0?"no":"yes"}},this.comparator=this.filterTypeOptions.comparators[0]},mounted:function(){this.updateSelectedValues()},methods:{updateSelectedValues:function(){var t=this;if(!this.query||!this.query.metaquery||!Array.isArray(this.query.metaquery))return!1;var e=this.query.metaquery.findIndex((function(e){return e.key==t.metadatumId}));if(e>=0){var i=this.query.metaquery[e];i.value&&i.value.length>0&&(this.value=Array.isArray(i.value)?Number(i.value[0]):Number(i.value)),i.compare&&(this.comparator=i.compare)}else this.value=null},emit:function(){null!==this.value&&""!==this.value&&this.$emit("input",{filter:"numeric",compare:this.comparator,metadatum_id:this.metadatumId,collection_id:this.collectionId,value:this.value,type:"NUMERIC"})},onChangeComparator:function(t){this.comparator=t,this.emit()}}}},11375:(t,e,i)=>{i.d(e,{X:()=>c});var a=i(6934),n={class:"numeric-filter-container"},o=["aria-label"],r={class:"icon is-small"},l=["innerHTML"],s=function(t){return(0,a.Qi)("data-v-6ac5109e"),t=t(),(0,a.jt)(),t}((function(){return(0,a.Lk)("span",{class:"icon"},[(0,a.Lk)("i",{class:"tainacan-icon tainacan-icon-1-25em tainacan-icon-arrowdown"})],-1)}));function c(t,e,i,c,u,m){var h=(0,a.g2)("b-dropdown-item"),p=(0,a.g2)("b-dropdown"),d=(0,a.g2)("b-numberinput");return(0,a.uX)(),(0,a.CE)("div",n,[u.filterTypeOptions.comparators.length>1?((0,a.uX)(),(0,a.Wv)(p,{key:0,"mobile-modal":!0,"aria-role":"list","trap-focus":"","onUpdate:modelValue":e[0]||(e[0]=function(e){t.resetPage(),m.onChangeComparator(e)})},{trigger:(0,a.k6)((function(){return[(0,a.Lk)("button",{"aria-label":t.$i18n.get("label_comparator"),class:"button is-white"},[(0,a.Lk)("span",r,[(0,a.Lk)("i",{innerHTML:t.comparatorsObject[u.comparator].symbol},null,8,l)]),s],8,o)]})),default:(0,a.k6)((function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.comparatorsObject,(function(t,e){return(0,a.uX)(),(0,a.CE)(a.FK,{key:e},["yes"==t.enabled?((0,a.uX)(),(0,a.Wv)(h,{key:0,role:"button",class:(0,a.C4)({"is-active":u.comparator==e}),value:e,"aria-role":"listitem",innerHTML:t.symbol+"Â "+t.label},null,8,["class","value","innerHTML"])):(0,a.Q3)("",!0)],64)})),128))]})),_:1})):(0,a.Q3)("",!0),(0,a.bF)(d,{modelValue:u.value,"onUpdate:modelValue":[e[1]||(e[1]=function(t){return u.value=t}),e[2]||(e[2]=function(e){t.resetPage(e),m.emit(e)})],"aria-labelledby":"filter-label-id-"+t.filter.id,"aria-minus-label":t.$i18n.get("label_decrease"),"aria-plus-label":t.$i18n.get("label_increase"),placeholder:t.filter.placeholder?t.filter.placeholder:"",size:"is-small",step:Number(u.filterTypeOptions.step)},null,8,["modelValue","aria-labelledby","aria-minus-label","aria-plus-label","placeholder","step"])])}},8926:(t,e,i)=>{i.d(e,{F:()=>p,s:()=>h});var a=i(55373),n=i.n(a),o=i(75552),r=i(40834);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function s(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return c(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var _n=0,a=function(){};return{s:a,n:function(){return _n>=t.length?{done:!0}:{done:!1,value:t[_n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,r=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){r=!0,n=t},f:function(){try{o||null==i.return||i.return()}finally{if(r)throw n}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=Array(e);i<e;i++)a[i]=t[i];return a}function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function m(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=l(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,e||"default");if("object"!=l(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==l(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var h={data:function(){return{collectionId:"",metadatumId:"",metadatumType:"",metadatumName:"",filterTypeOptions:[],shouldAddOptions:!1}},props:{filter:Object,query:Object,isRepositoryLevel:Boolean,isUsingElasticSearch:Boolean,isLoadingItems:Boolean,currentCollectionId:[Number,String]},created:function(){this.collectionId=this.filter.collection_id?this.filter.collection_id:this.collectionId,this.metadatumId=this.filter.metadatum.metadatum_id?this.filter.metadatum.metadatum_id:this.metadatumId,this.metadatumName=this.filter.metadatum&&this.filter.metadatum.metadatum_name?this.filter.metadatum.metadatum_name:this.metadatumName,this.filterTypeOptions=this.filter.filter_type_options?this.filter.filter_type_options:this.filterTypeOptions,this.metadatumType=this.filter.metadatum.metadata_type_object&&this.filter.metadatum.metadata_type_object.className?this.filter.metadatum.metadata_type_object.className:this.metadatumType},methods:{resetPage:function(){this.$eventBusSearch.resetPageOnStore()}}},p={data:function(){return{getOptionsValuesCancel:void 0,isLoadingOptions:!1,facetSearchPage:1}},emits:["update-parent-collapse"],computed:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach((function(e){m(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},(0,r.L8)("search",{facetsFromItemSearch:"getFacets"})),watch:{isLoadingItems:{handler:function(){this.isUsingElasticSearch&&(this.isLoadingOptions=this.isLoadingItems)},immediate:!0}},methods:{getValuesPlainText:function(t){var e=this,i=t.metadatumId,a=t.search,r=t.isRepositoryLevel,l=t.valuesToIgnore,s=t.offset,c=t.number,u=t.isInCheckboxModal,m=t.getSelected,h=void 0===m?"0":m,p=t.countItems,d=void 0===p||p;if(u||a||!this.isUsingElasticSearch){var f=o.Ay.CancelToken.source(),b=JSON.parse(JSON.stringify(this.query));null!=b.fetch_only&&delete b.fetch_only;var g={current_query:b},y="";return y=r?"/facets/".concat(i,"?getSelected=").concat(h,"&"):"default"==this.filter.collection_id&&this.currentCollectionId?"/collection/".concat(this.currentCollectionId,"/facets/").concat(i,"?getSelected=").concat(h,"&"):"/collection/".concat(this.filter.collection_id,"/facets/").concat(i,"?getSelected=").concat(h,"&"),null!=s&&null!=c&&(this.isUsingElasticSearch?y+="last_term=".concat(s,"&number=").concat(c,"&"):y+="offset=".concat(s,"&number=").concat(c,"&")),y+=a&&null!=s&&null!=c||a?"search=".concat(a,"&")+n().stringify(g):n().stringify(g),null!=d&&!1===d&&(y+="&count_items=0"),this.isLoadingOptions=!0,new Object({request:new Promise((function(t,i){o.Ay.tainacanApi.get(y,{cancelToken:f.token}).then((function(i){e.isLoadingOptions=!1,i.data.values?e.prepareOptionsForPlainText(i.data.values,a,l,u):e.prepareOptionsForPlainText(i.data,a,l,u),t(i)})).catch((function(t){o.Ay.isCancel(t)?console.log("Request canceled: ",t.message):e.isLoadingOptions=!1,i(t)}))})),source:f})}var v=new Promise((function(t){for(var i in e.facetsFromItemSearch)i==e.filter.id&&(e.prepareOptionsForPlainText(e.facetsFromItemSearch[i],a,l,u),e.$emit("update-parent-collapse",e.facetsFromItemSearch[i].length>0));t()}));return new Object({request:v})},getValuesRelationship:function(t){var e=this,i=t.search,a=t.isRepositoryLevel,r=t.valuesToIgnore,l=t.offset,s=t.number,c=t.isInCheckboxModal,u=t.getSelected,m=void 0===u?"0":u,h=t.countItems,p=void 0===h||h;if(c||i||!this.facetsFromItemSearch||Object.values(this.facetsFromItemSearch).length<=0){var d=o.Ay.CancelToken.source(),f=JSON.parse(JSON.stringify(this.query));null!=f.fetch_only&&delete f.fetch_only;var b={current_query:f},g="";return g=a?"/facets/".concat(this.filter.metadatum.metadatum_id,"?getSelected=").concat(m,"&"):"default"==this.filter.collection_id&&this.currentCollectionId?"/collection/".concat(this.currentCollectionId,"/facets/").concat(this.filter.metadatum.metadatum_id,"?getSelected=").concat(m,"&"):"/collection/".concat(this.filter.collection_id,"/facets/").concat(this.filter.metadatum.metadatum_id,"?getSelected=").concat(m,"&"),g+=null!=l&&null!=s?"offset=".concat(l,"&number=").concat(s):"nopaging=1",i&&(g+="&search=".concat(i)),null!=p&&!1===p&&(g+="&count_items=0"),this.isLoadingOptions=!0,new Object({request:new Promise((function(t,a){o.Ay.tainacanApi.get(g+"&"+n().stringify(b)).then((function(a){e.isLoadingOptions=!1,a.data.values?e.prepareOptionsForRelationship(a.data.values,i,r,c):e.prepareOptionsForRelationship(a.data,i,r,c),t(a)})).catch((function(t){o.Ay.isCancel(t)?console.log("Request canceled: ",t.message):e.isLoadingOptions=!1,a(t)}))})),source:d})}var y=new Promise((function(t){for(var a in e.facetsFromItemSearch)a==e.filter.id&&(e.prepareOptionsForRelationship(e.facetsFromItemSearch[a],i,r,c),e.$emit("update-parent-collapse",e.facetsFromItemSearch[a].length>0));t()}));return new Object({request:y})},prepareOptionsForPlainText:function(t,e,i,a){var n=[],o=[];Array.isArray(t)||(t=Object.values(t));var r,l=s(t);try{var c=function(){var t=r.value;if(null!=i&&i.length>0){var l=i.findIndex((function(e){return e==t.value}));e&&a?n.push({label:t.label,value:t.value,total_items:t.total_items}):l<0&&o.push({label:t.label,value:t.value,total_items:t.total_items})}else e&&a?n.push({label:t.label,value:t.value,total_items:t.total_items}):o.push({label:t.label,value:t.value,total_items:t.total_items})};for(l.s();!(r=l.n()).done;)c()}catch(t){l.e(t)}finally{l.f()}if(!0===this.shouldAddOptions&&this.searchResults&&this.searchResults.length?this.searchResults=this.searchResults.concat(n):this.searchResults=n,o?!0===this.shouldAddOptions&&this.options&&this.options.length?this.options=this.options.concat(o):this.options=o:e||(this.noMorePage=1),this.options.length<this.maxNumOptionsCheckboxList&&!e&&(this.noMorePage=1),this.filter.filter_type_object&&1==this.filter.filter_type_object.use_max_options&&this.filter.max_options&&this.options.length>=this.filter.max_options){var u=!0;this.options.length===this.filter.max_options?this.options[this.filter.max_options-1].showViewAllButton=u:this.options[this.options.length-1].showViewAllButton=u}},prepareOptionsForRelationship:function(t,e,i,a){var n=this,o=[],r=[];if(t.length>0){var l,c=s(t);try{var u=function(){var t=l.value;if(null!=i&&i.length>0){var s=i.findIndex((function(e){return e==t.value}));e&&a?o.push({label:t.label,value:t.value,img:t.thumbnail?n.$thumbHelper.getSrc(t.thumbnail,"tainacan-small"):t.img?t.img:"",total_items:t.total_items}):s<0&&r.push({label:t.label,value:t.value,img:t.thumbnail?n.$thumbHelper.getSrc(t.thumbnail,"tainacan-small"):t.img?t.img:"",total_items:t.total_items})}else e&&a?o.push({label:t.label,value:t.value,img:t.thumbnail?n.$thumbHelper.getSrc(t.thumbnail,"tainacan-small"):t.img?t.img:"",total_items:t.total_items}):r.push({label:t.label,value:t.value,img:t.thumbnail?n.$thumbHelper.getSrc(t.thumbnail,"tainacan-small"):t.img?t.img:"",total_items:t.total_items})};for(c.s();!(l=c.n()).done;)u()}catch(t){c.e(t)}finally{c.f()}}if(!0===this.shouldAddOptions&&this.searchResults&&this.searchResults.length?this.searchResults=this.searchResults.concat(o):this.searchResults=o,r?!0===this.shouldAddOptions&&this.options&&this.options.length?this.options=this.options.concat(r):this.options=r:e||(this.noMorePage=1),this.options.length<this.maxNumOptionsCheckboxList&&(this.noMorePage=1),this.filter.filter_type_object&&1==this.filter.filter_type_object.use_max_options&&this.filter.max_options&&this.options.length>=this.filter.max_options){var m=!0;this.options.length===this.filter.max_options?this.options[this.filter.max_options-1].showViewAllButton=m:this.options[this.options.length-1].showViewAllButton=m}}},beforeUnmount:function(){null!=this.getOptionsValuesCancel&&this.getOptionsValuesCancel.cancel("Facet search Canceled.")}}},40240:(t,e,i)=>{i.d(e,{A:()=>l});var a=i(31601),n=i.n(a),o=i(76314),r=i.n(o)()(n());r.push([t.id,".numeric-filter-container[data-v-6ac5109e]{display:flex;height:auto;align-items:stretch}@supports not (contain: inline-size){@media screen and (min-width: 769px) and (max-width: 1500px){.numeric-filter-container[data-v-6ac5109e]{flex-wrap:wrap;height:60px}}}@container filterscomponentslist (max-width: 170px){.numeric-filter-container[data-v-6ac5109e]{flex-wrap:wrap;height:60px}.numeric-filter-container .dropdown[data-v-6ac5109e]{flex-grow:2 !important}}.numeric-filter-container .dropdown[data-v-6ac5109e]{width:auto;flex-grow:0}.numeric-filter-container .dropdown .dropdown-trigger button[data-v-6ac5109e]{padding:2px 0.5em 2px 0.5em !important;height:auto !important;font-size:1em !important;min-height:100%}.numeric-filter-container .dropdown .dropdown-trigger button i[data-v-6ac5109e]:not(.tainacan-icon-arrowdown){font-size:1.25em;font-style:normal;color:var(--tainacan-info-color)}.numeric-filter-container .b-numberinput.is-grouped[data-v-6ac5109e]{flex-grow:1}\n",""]);const l=r},32459:(t,e,i)=>{var a=i(85072),n=i.n(a),o=i(97825),r=i.n(o),l=i(77659),s=i.n(l),c=i(55056),u=i.n(c),m=i(10540),h=i.n(m),p=i(63494),d=i.n(p),f=i(40240),b={};b.styleTagTransform=d(),b.setAttributes=u(),b.insert=s().bind(null,"head"),b.domAPI=r(),b.insertStyleElement=h();n()(f.A,b),f.A&&f.A.locals&&f.A.locals},66748:(t,e,i)=>{i.r(e),i.d(e,{default:()=>o});var a=i(17334),n=i(76871);i(47532);const o=(0,i(66262).A)(n.A,[["render",a.X],["__scopeId","data-v-6ac5109e"]])},76871:(t,e,i)=>{i.d(e,{A:()=>a.A});var a=i(2626)},17334:(t,e,i)=>{i.d(e,{X:()=>a.X});var a=i(11375)},47532:(t,e,i)=>{i(32459)}}]);