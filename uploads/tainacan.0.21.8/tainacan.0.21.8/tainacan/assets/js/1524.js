"use strict";(self.webpackChunktainacan=self.webpackChunktainacan||[]).push([[1524],{77926:(e,t,n)=>{n.d(t,{A:()=>c});var i=n(40834),o=n(19741);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c={name:"ItemCopyDialog",props:{icon:String,onConfirm:{type:Function,default:function(){}},collectionId:[String,Number],itemId:String},emits:["close"],data:function(){return{isLoading:Boolean,message:String,newItems:Array,copyCount:Number,hasCopied:Boolean,isCreatingSequenceEditGroup:Boolean}},created:function(){this.message=this.$i18n.get("instruction_select_the_amount_of_copies"),this.isLoading=!1,this.hasCopied=!1,this.isCreatingSequenceEditGroup=!1,this.copyCount=1},mounted:function(){this.$refs.itemCopyDialog&&this.$refs.itemCopyDialog.focus()},methods:r(r(r({},(0,i.i0)("item",["duplicateItem"])),(0,i.i0)("bulkedition",["createEditGroup","createSequenceEditGroup"])),{},{generateCopies:function(){var e=this;this.isLoading=!0,this.message=this.copyCount>1?this.$i18n.get("info_await_while_item_copies"):this.$i18n.get("info_await_while_item_copy"),this.duplicateItem({collectionId:this.collectionId,itemId:this.itemId,copies:this.copyCount}).then((function(t){e.isLoading=!1,e.hasCopied=!0,e.message=t.length>1?e.$i18n.getWithVariables("label_%s_items_copy_success",[e.copyCount]):e.$i18n.get("label_one_item_copy_success"),e.newItems=t})).catch((function(t){e.$console.error("Error fetching item for copy "+t),e.isLoading=!1,e.message=e.$i18n.get("label_item_copy_failure")}))},sequenceEditGroup:function(){var e=this,t=this.newItems.map((function(e){return e.id}));this.isCreatingSequenceEditGroup=!0,this.createSequenceEditGroup({object:t,collectionId:this.collectionId}).then((function(t){var n=t.id;e.isCreatingSequenceEditGroup=!1,e.$router.push(e.$routerHelper.getCollectionSequenceEditPath(e.collectionId,n,1)),e.$emit("close")}))},openBulkEditionModal:function(){var e=this.newItems.map((function(e){return e.id}));this.$buefy.modal.open({parent:this,component:o.default,props:{modalTitle:this.$i18n.get("info_editing_items_in_bulk"),totalItems:e.length,selectedForBulk:e,objectType:this.$i18n.get("items"),collectionId:this.collectionId},width:"calc(100% - (2 * var(--tainacan-one-column)))",trapFocus:!0,customClass:"tainacan-modal",closeButtonAriaLabel:this.$i18n.get("close")}),this.$emit("close")}})}},1827:(e,t,n)=>{n.d(t,{X:()=>b});var i=n(6934),o={ref:"itemCopyDialog","aria-labelledby":"alert-dialog-title",autofocus:"",role:"alertdialog",tabindex:"-1","aria-modal":"",class:"tainacan-form tainacan-dialog dialog"},a={class:"modal-card",style:{width:"auto"}},s={key:0,class:"modal-custom-icon"},r={class:"icon is-large"},l={tabindex:"1",class:"modal-card-body"},c={class:"modal-card-head"},u={id:"alert-dialog-title",class:"modal-card-title"},d={key:0,class:"tainacan-form"},p={class:"modal-card-foot form-submit"},m=["disabled"],f=["disabled"];function b(e,t,n,b,g,h){var y=(0,i.g2)("b-numberinput"),_=(0,i.g2)("b-field");return(0,i.uX)(),(0,i.CE)("div",o,[(0,i.Lk)("div",a,[null!=n.icon&&""!=n.icon?((0,i.uX)(),(0,i.CE)("div",s,[(0,i.Lk)("span",r,[(0,i.Lk)("i",{class:(0,i.C4)(["tainacan-icon-"+n.icon,"tainacan-icon"])},null,2)])])):(0,i.Q3)("",!0),(0,i.Lk)("section",l,[(0,i.Lk)("header",c,[(0,i.Lk)("h1",u,(0,i.v_)(e.$i18n.get("label_make_copies_of_item")),1)]),(0,i.eW)(" "+(0,i.v_)(g.message)+" ",1),g.hasCopied||g.isLoading?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",d,[(0,i.bF)(_,{horizontal:"",label:e.$i18n.get("label_number_of_copies")+":"},{default:(0,i.k6)((function(){return[(0,i.bF)(y,{ref:"copy-count-numerbinput","aria-minus-label":e.$i18n.get("label_decrease"),"aria-plus-label":e.$i18n.get("label_increase"),min:"1","model-value":g.copyCount,step:"1","onUpdate:modelValue":t[0]||(t[0]=function(e){return g.copyCount=e})},null,8,["aria-minus-label","aria-plus-label","model-value"])]})),_:1},8,["label"])]))]),(0,i.Lk)("footer",p,[(0,i.Lk)("button",{type:"submit",class:"button is-outlined",disabled:g.isLoading,onClick:t[1]||(t[1]=function(t){n.onConfirm(g.newItems),e.$emit("close")})},(0,i.v_)(g.hasCopied?e.$i18n.get("label_return_to_list"):e.$i18n.get("cancel")),9,m),g.hasCopied?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("button",{key:0,class:(0,i.C4)([{"is-loading":g.isLoading,"is-success":!g.isLoading},"button"]),type:"submit",disabled:g.copyCount<=0||isNaN(g.copyCount),onClick:t[2]||(t[2]=function(e){h.generateCopies()})},(0,i.v_)(e.$i18n.get("run")),11,f)),1==g.copyCount&&g.hasCopied&&1==g.newItems.length?((0,i.uX)(),(0,i.CE)("button",{key:1,class:"button is-secondary",type:"submit",onClick:t[3]||(t[3]=(0,i.D$)((function(t){e.$router.push(e.$routerHelper.getItemEditPath(n.collectionId,g.newItems[0].id)),e.$emit("close")}),["prevent"]))},(0,i.v_)(e.$i18n.getFrom("items","edit_item")),1)):(0,i.Q3)("",!0),g.copyCount>1&&g.hasCopied&&g.newItems.length>1?((0,i.uX)(),(0,i.CE)("button",{key:2,style:{"margin-left":"24px"},class:(0,i.C4)(["button is-secondary",{"is-loading":g.isCreatingSequenceEditGroup}]),type:"submit",onClick:t[4]||(t[4]=(0,i.D$)((function(e){return h.sequenceEditGroup()}),["prevent"]))},(0,i.v_)(e.$i18n.get("label_sequence_edit_items")),3)):(0,i.Q3)("",!0),g.copyCount>1&&g.hasCopied&&g.newItems.length>1?((0,i.uX)(),(0,i.CE)("button",{key:3,class:"button is-secondary",type:"submit",onClick:t[5]||(t[5]=(0,i.D$)((function(e){return h.openBulkEditionModal()}),["prevent"]))},(0,i.v_)(e.$i18n.get("label_bulk_edit_items")),1)):(0,i.Q3)("",!0)])])],512)}},37639:(e,t,n)=>{n.d(t,{A:()=>r});var i=n(31601),o=n.n(i),a=n(76314),s=n.n(a)()(o());s.push([e.id,"\ni.tainacan-icon[data-v-5e6808f8],\n    i.tainacan-icon[data-v-5e6808f8]::before {\n        font-size: 42px;\n}\nbutton.is-success[data-v-5e6808f8] {\n        margin-left: auto;\n}\n.field.is-horizontal[data-v-5e6808f8] {\n        margin-top: 8px !important;\n        align-items: flex-end;\n}\n.field.is-horizontal[data-v-5e6808f8] .label {\n        white-space: nowrap;\n}\n.field.is-horizontal[data-v-5e6808f8] .has-numberinput {\n        margin-top: 0;\n}\n.modal-card-foot[data-v-5e6808f8] {\n        margin-top: 12px;\n}\n@media screen and (min-width: 769px) {\n.modal-card[data-v-5e6808f8] {\n            max-width: 640px;\n}\n}\n\n",""]);const r=s},4796:(e,t,n)=>{var i=n(85072),o=n.n(i),a=n(97825),s=n.n(a),r=n(77659),l=n.n(r),c=n(55056),u=n.n(c),d=n(10540),p=n.n(d),m=n(63494),f=n.n(m),b=n(37639),g={};g.styleTagTransform=f(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=p();o()(b.A,g),b.A&&b.A.locals&&b.A.locals},31524:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});var i=n(19082),o=n(4707);n(67003);const a=(0,n(66262).A)(o.A,[["render",i.X],["__scopeId","data-v-5e6808f8"]])},4707:(e,t,n)=>{n.d(t,{A:()=>i.A});var i=n(77926)},19082:(e,t,n)=>{n.d(t,{X:()=>i.X});var i=n(1827)},67003:(e,t,n)=>{n(4796)}}]);